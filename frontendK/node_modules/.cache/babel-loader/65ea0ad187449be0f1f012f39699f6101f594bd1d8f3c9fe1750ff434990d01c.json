{"ast":null,"code":"export async function streamFromBackend(questionId, inputs = {}, callbacks = {}) {\n  const {\n    onLine = () => {},\n    onError = () => {},\n    onDone = () => {},\n    signal\n  } = callbacks;\n  function endpointFor(id) {\n    if (/^7[a-f]$/.test(id)) return `question${id}_stream`;\n    const n = parseInt(id, 10);\n    if (!isNaN(n)) return `question${n}_stream`;\n    return `question${id}_stream`;\n  }\n  const endpoint = endpointFor(questionId);\n  const params = new URLSearchParams();\n  for (const [k, v] of Object.entries(inputs || {})) {\n    if (v === undefined || v === null || v === \"\") continue;\n    params.append(k, v);\n  }\n  const url = `http://127.0.0.1:8000/${endpoint}${params.toString() ? `?${params.toString()}` : \"\"}`;\n  try {\n    const res = await fetch(url, {\n      method: \"GET\",\n      signal\n    });\n    if (!res.ok) {\n      const text = await res.text().catch(() => \"\");\n      throw new Error(`HTTP ${res.status} ${res.statusText} ${text}`);\n    }\n    if (!res.body) throw new Error(\"Streaming not supported by this browser / server response.\");\n    const reader = res.body.getReader();\n    const decoder = new TextDecoder();\n    let buffer = \"\";\n    while (true) {\n      const {\n        done,\n        value\n      } = await reader.read();\n      if (done) break;\n      buffer += decoder.decode(value, {\n        stream: true\n      });\n      const lines = buffer.split(\"\\n\");\n      buffer = lines.pop();\n      for (const line of lines) {\n        onLine(line);\n      }\n    }\n    if (buffer && buffer.trim() !== \"\") onLine(buffer);\n    onDone();\n  } catch (err) {\n    if (err.name === 'AbortError') {\n      // silently handle user abort, call onDone anyway if needed\n      onDone();\n      return;\n    }\n    onError(err);\n    throw err;\n  }\n}","map":{"version":3,"names":["streamFromBackend","questionId","inputs","callbacks","onLine","onError","onDone","signal","endpointFor","id","test","n","parseInt","isNaN","endpoint","params","URLSearchParams","k","v","Object","entries","undefined","append","url","toString","res","fetch","method","ok","text","catch","Error","status","statusText","body","reader","getReader","decoder","TextDecoder","buffer","done","value","read","decode","stream","lines","split","pop","line","trim","err","name"],"sources":["C:/Users/Taleem Hossain/Academics/IIT sem 3/Numerical Methods/Prime-Number-Assisgnment/frontendK/src/api.js"],"sourcesContent":["export async function streamFromBackend(questionId, inputs = {}, callbacks = {}) {\r\n  const { onLine = () => {}, onError = () => {}, onDone = () => {}, signal } = callbacks;\r\n\r\n  function endpointFor(id) {\r\n    if (/^7[a-f]$/.test(id)) return `question${id}_stream`;\r\n    const n = parseInt(id, 10);\r\n    if (!isNaN(n)) return `question${n}_stream`;\r\n    return `question${id}_stream`;\r\n  }\r\n\r\n  const endpoint = endpointFor(questionId);\r\n\r\n  const params = new URLSearchParams();\r\n  for (const [k, v] of Object.entries(inputs || {})) {\r\n    if (v === undefined || v === null || v === \"\") continue;\r\n    params.append(k, v);\r\n  }\r\n\r\n  const url = `http://127.0.0.1:8000/${endpoint}${params.toString() ? `?${params.toString()}` : \"\"}`;\r\n\r\n  try {\r\n    const res = await fetch(url, { method: \"GET\", signal });\r\n    if (!res.ok) {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(`HTTP ${res.status} ${res.statusText} ${text}`);\r\n    }\r\n    if (!res.body) throw new Error(\"Streaming not supported by this browser / server response.\");\r\n\r\n    const reader = res.body.getReader();\r\n    const decoder = new TextDecoder();\r\n    let buffer = \"\";\r\n\r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      buffer += decoder.decode(value, { stream: true });\r\n      const lines = buffer.split(\"\\n\");\r\n      buffer = lines.pop();\r\n      for (const line of lines) {\r\n        onLine(line);\r\n      }\r\n    }\r\n    if (buffer && buffer.trim() !== \"\") onLine(buffer);\r\n    onDone();\r\n\r\n  } catch (err) {\r\n    if (err.name === 'AbortError') {\r\n      // silently handle user abort, call onDone anyway if needed\r\n      onDone();\r\n      return;\r\n    }\r\n    onError(err);\r\n    throw err;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}