{"ast":null,"code":"// src/api.js\n// Helper to stream from your Python backend streaming endpoints (questionX_stream)\nexport async function streamFromBackend(questionId, inputs = {}, callbacks = {}) {\n  // callbacks: { onLine(line), onError(err), onDone(), signal }\n  const {\n    onLine = () => {},\n    onError = () => {},\n    onDone = () => {},\n    signal\n  } = callbacks;\n\n  // Map questionId -> endpoint name\n  // questionId may be '1','2',... or '7a','7b',... etc\n  function endpointFor(id) {\n    // If an explicit 7-subquestion like '7a' is used, pass as-is.\n    if (/^7[a-f]$/.test(id)) return `question${id}_stream`;\n    // numeric ids\n    const n = parseInt(id, 10);\n    if (!isNaN(n)) {\n      return `question${n}_stream`;\n    }\n    // fallback\n    return `question${id}_stream`;\n  }\n  const endpoint = endpointFor(questionId);\n\n  // Build query params from inputs object (inputs values are strings from inputs)\n  const params = new URLSearchParams();\n  // typical inputs may be { n: '2', m: '1040', pm: '10', type: 'a' } etc\n  for (const [k, v] of Object.entries(inputs || {})) {\n    if (v === undefined || v === null || v === \"\") continue;\n    // if question 7 main ID, we may have inputs.type used by UI (but we map questionId already)\n    params.append(k, v);\n  }\n\n  // final URL (adjust host/port to your backend)\n  const base = \"http://127.0.0.1:8000\"; // <-- your Python backend\n  const url = `${base}/${endpoint}${params.toString() ? `?${params.toString()}` : \"\"}`;\n  try {\n    const res = await fetch(url, {\n      method: \"GET\",\n      signal\n    });\n    if (!res.ok) {\n      const text = await res.text().catch(() => \"\");\n      throw new Error(`HTTP ${res.status} ${res.statusText} ${text}`);\n    }\n    if (!res.body) throw new Error(\"Streaming not supported by this browser / server response.\");\n    const reader = res.body.getReader();\n    const decoder = new TextDecoder();\n    let buffer = \"\";\n    while (true) {\n      const {\n        done,\n        value\n      } = await reader.read();\n      if (done) break;\n      buffer += decoder.decode(value, {\n        stream: true\n      });\n      const lines = buffer.split(\"\\n\");\n      buffer = lines.pop(); // last partial line\n      for (const line of lines) {\n        // skip empty lines if desired:\n        onLine(line);\n      }\n    }\n    // remaining buffer\n    if (buffer && buffer.trim() !== \"\") onLine(buffer);\n    onDone();\n  } catch (err) {\n    // If aborted, err.name === 'AbortError' — caller handles that if they want\n    onError(err);\n    throw err;\n  }\n}","map":{"version":3,"names":["streamFromBackend","questionId","inputs","callbacks","onLine","onError","onDone","signal","endpointFor","id","test","n","parseInt","isNaN","endpoint","params","URLSearchParams","k","v","Object","entries","undefined","append","base","url","toString","res","fetch","method","ok","text","catch","Error","status","statusText","body","reader","getReader","decoder","TextDecoder","buffer","done","value","read","decode","stream","lines","split","pop","line","trim","err"],"sources":["C:/Users/Taleem Hossain/Academics/IIT sem 3/Numerical Methods/Prime-Number-Assisgnment/k/frontend/src/api.js"],"sourcesContent":["// src/api.js\r\n// Helper to stream from your Python backend streaming endpoints (questionX_stream)\r\nexport async function streamFromBackend(questionId, inputs = {}, callbacks = {}) {\r\n  // callbacks: { onLine(line), onError(err), onDone(), signal }\r\n  const { onLine = () => {}, onError = () => {}, onDone = () => {}, signal } = callbacks;\r\n\r\n  // Map questionId -> endpoint name\r\n  // questionId may be '1','2',... or '7a','7b',... etc\r\n  function endpointFor(id) {\r\n    // If an explicit 7-subquestion like '7a' is used, pass as-is.\r\n    if (/^7[a-f]$/.test(id)) return `question${id}_stream`;\r\n    // numeric ids\r\n    const n = parseInt(id, 10);\r\n    if (!isNaN(n)) {\r\n      return `question${n}_stream`;\r\n    }\r\n    // fallback\r\n    return `question${id}_stream`;\r\n  }\r\n\r\n  const endpoint = endpointFor(questionId);\r\n\r\n  // Build query params from inputs object (inputs values are strings from inputs)\r\n  const params = new URLSearchParams();\r\n  // typical inputs may be { n: '2', m: '1040', pm: '10', type: 'a' } etc\r\n  for (const [k, v] of Object.entries(inputs || {})) {\r\n    if (v === undefined || v === null || v === \"\") continue;\r\n    // if question 7 main ID, we may have inputs.type used by UI (but we map questionId already)\r\n    params.append(k, v);\r\n  }\r\n\r\n  // final URL (adjust host/port to your backend)\r\n  const base = \"http://127.0.0.1:8000\"; // <-- your Python backend\r\n  const url = `${base}/${endpoint}${params.toString() ? `?${params.toString()}` : \"\"}`;\r\n\r\n  try {\r\n    const res = await fetch(url, { method: \"GET\", signal });\r\n    if (!res.ok) {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(`HTTP ${res.status} ${res.statusText} ${text}`);\r\n    }\r\n    if (!res.body) throw new Error(\"Streaming not supported by this browser / server response.\");\r\n\r\n    const reader = res.body.getReader();\r\n    const decoder = new TextDecoder();\r\n    let buffer = \"\";\r\n\r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      buffer += decoder.decode(value, { stream: true });\r\n      const lines = buffer.split(\"\\n\");\r\n      buffer = lines.pop(); // last partial line\r\n      for (const line of lines) {\r\n        // skip empty lines if desired:\r\n        onLine(line);\r\n      }\r\n    }\r\n    // remaining buffer\r\n    if (buffer && buffer.trim() !== \"\") onLine(buffer);\r\n    onDone();\r\n  } catch (err) {\r\n    // If aborted, err.name === 'AbortError' — caller handles that if they want\r\n    onError(err);\r\n    throw err;\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA;AACA,OAAO,eAAeA,iBAAiBA,CAACC,UAAU,EAAEC,MAAM,GAAG,CAAC,CAAC,EAAEC,SAAS,GAAG,CAAC,CAAC,EAAE;EAC/E;EACA,MAAM;IAAEC,MAAM,GAAGA,CAAA,KAAM,CAAC,CAAC;IAAEC,OAAO,GAAGA,CAAA,KAAM,CAAC,CAAC;IAAEC,MAAM,GAAGA,CAAA,KAAM,CAAC,CAAC;IAAEC;EAAO,CAAC,GAAGJ,SAAS;;EAEtF;EACA;EACA,SAASK,WAAWA,CAACC,EAAE,EAAE;IACvB;IACA,IAAI,UAAU,CAACC,IAAI,CAACD,EAAE,CAAC,EAAE,OAAO,WAAWA,EAAE,SAAS;IACtD;IACA,MAAME,CAAC,GAAGC,QAAQ,CAACH,EAAE,EAAE,EAAE,CAAC;IAC1B,IAAI,CAACI,KAAK,CAACF,CAAC,CAAC,EAAE;MACb,OAAO,WAAWA,CAAC,SAAS;IAC9B;IACA;IACA,OAAO,WAAWF,EAAE,SAAS;EAC/B;EAEA,MAAMK,QAAQ,GAAGN,WAAW,CAACP,UAAU,CAAC;;EAExC;EACA,MAAMc,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;EACpC;EACA,KAAK,MAAM,CAACC,CAAC,EAAEC,CAAC,CAAC,IAAIC,MAAM,CAACC,OAAO,CAAClB,MAAM,IAAI,CAAC,CAAC,CAAC,EAAE;IACjD,IAAIgB,CAAC,KAAKG,SAAS,IAAIH,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAK,EAAE,EAAE;IAC/C;IACAH,MAAM,CAACO,MAAM,CAACL,CAAC,EAAEC,CAAC,CAAC;EACrB;;EAEA;EACA,MAAMK,IAAI,GAAG,uBAAuB,CAAC,CAAC;EACtC,MAAMC,GAAG,GAAG,GAAGD,IAAI,IAAIT,QAAQ,GAAGC,MAAM,CAACU,QAAQ,CAAC,CAAC,GAAG,IAAIV,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE;EAEpF,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;MAAEI,MAAM,EAAE,KAAK;MAAErB;IAAO,CAAC,CAAC;IACvD,IAAI,CAACmB,GAAG,CAACG,EAAE,EAAE;MACX,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,EAAE,CAAC;MAC7C,MAAM,IAAIC,KAAK,CAAC,QAAQN,GAAG,CAACO,MAAM,IAAIP,GAAG,CAACQ,UAAU,IAAIJ,IAAI,EAAE,CAAC;IACjE;IACA,IAAI,CAACJ,GAAG,CAACS,IAAI,EAAE,MAAM,IAAIH,KAAK,CAAC,4DAA4D,CAAC;IAE5F,MAAMI,MAAM,GAAGV,GAAG,CAACS,IAAI,CAACE,SAAS,CAAC,CAAC;IACnC,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAAC,CAAC;IACjC,IAAIC,MAAM,GAAG,EAAE;IAEf,OAAO,IAAI,EAAE;MACX,MAAM;QAAEC,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMN,MAAM,CAACO,IAAI,CAAC,CAAC;MAC3C,IAAIF,IAAI,EAAE;MACVD,MAAM,IAAIF,OAAO,CAACM,MAAM,CAACF,KAAK,EAAE;QAAEG,MAAM,EAAE;MAAK,CAAC,CAAC;MACjD,MAAMC,KAAK,GAAGN,MAAM,CAACO,KAAK,CAAC,IAAI,CAAC;MAChCP,MAAM,GAAGM,KAAK,CAACE,GAAG,CAAC,CAAC,CAAC,CAAC;MACtB,KAAK,MAAMC,IAAI,IAAIH,KAAK,EAAE;QACxB;QACA1C,MAAM,CAAC6C,IAAI,CAAC;MACd;IACF;IACA;IACA,IAAIT,MAAM,IAAIA,MAAM,CAACU,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE9C,MAAM,CAACoC,MAAM,CAAC;IAClDlC,MAAM,CAAC,CAAC;EACV,CAAC,CAAC,OAAO6C,GAAG,EAAE;IACZ;IACA9C,OAAO,CAAC8C,GAAG,CAAC;IACZ,MAAMA,GAAG;EACX;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}